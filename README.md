# پروژه مدیریت کتابخانه (Library Management)

## توضیح کلی

این پروژه یک سیستم ساده برای مدیریت کتابخانه است که شامل بخش‌های زیر است:

- ورود کاربر (Login)
- داشبورد اطلاعات کلی
- مشاهدهٔ کتاب‌ها و امانت گرفتن
- مشاهده و بازگرداندن امانت‌های من

فایل‌ها به بخش‌های HTML، CSS و JavaScript تقسیم شده‌اند تا ساختار پروژه واضح و تمیز باشد.

---

## تکنولوژی‌ها و مهارت‌های استفاده‌شده

- HTML, CSS, JavaScript
- استفاده از کوکی برای نگهداری توکن JWT
- ارسال درخواست‌های HTTP با `XMLHttpRequest`
- ذخیره و بازیابی داده‌ها با `localStorage` (کش ۵ دقیقه‌ای)
- مدیریت وضعیت لودینگ و خطاها در صفحات مختلف

---

## توضیح درباره‌ی ورود کاربران (Login)

در توضیحات پروژه گفته شده بود که هر دانشجو حساب کاربری مخصوص به خود دارد و سایت مانند یک کتابخانه واقعی عمل می‌کند.  
این جمله به این معناست که اعتبارسنجی کاربران در **سمت سرور** انجام می‌شود و نیازی نیست که اطلاعات تمام کاربران در کد سمت کاربر وجود داشته باشد.  
در نتیجه، فرم لاگین فقط اطلاعات را به مسیر `/auth/login` ارسال می‌کند، توکن JWT دریافت می‌شود و کاربر بعد از ورود با استفاده از توکن به بخش‌های مختلف سایت دسترسی دارد.

---

## کمک‌هایی که از منابع مختلف گرفتم

در روند انجام پروژه برای یادگیری و اصلاح بخش‌هایی از کد از چند منبع استفاده کردم:

### ChatGPT

برای بخش‌هایی که نمی‌دانستم چطور باید پیاده‌سازی شوند از ChatGPT سؤال کردم.  
برخی از پرسش‌هایی که مطرح کردم:

- **چطور میشه با `XMLHttpRequest` درخواست POST فرستاد؟**  
  پاسخ داد که باید از `open()` و `send()` استفاده کنم و هدرها را تنظیم کنم.  
  ✅ نتیجه: تابع `apiRequest` را بر همین اساس نوشتم.

- **چطور میشه کش محلی با `localStorage` ساخت که بعد از چند دقیقه منقضی بشه؟**  
  ChatGPT پیشنهاد کرد زمان ذخیره‌سازی را همراه داده ذخیره کنم و بعد زمان فعلی را مقایسه کنم.  
  ✅ نتیجه: تابع‌های `cacheSet` و `cacheGet` را با همین منطق ساختم.

- **چطور کاربر را وقتی توکن ندارد به صفحه لاگین بفرستم؟**  
  ✅ پاسخ: بررسی وجود کوکی و در صورت نبود، `location.href = "login.html"`

- **چطور خروج کاربر طبیعی‌تر باشد؟**  
  ✅ پاسخ: با `confirm()` از کاربر سؤال شود؛ همین کار در `utils.js` انجام شد.

- **چطور پروژه شبیه کار خودم به نظر برسد؟**  
  ✅ ChatGPT پیشنهاد داد از پیام‌های فارسی ساده (`alert`) و `getElementById` استفاده کنم و از پیچیدگی دوری کنم.

---

## تغییراتی که خودم اعمال کردم

- پیام‌ها و متن‌ها به فارسی و لحن محاوره‌ای تغییر داده شدند.
- بررسی طول رمز عبور و فرمت ایمیل اضافه شد.
- متن لودینگ و خطاها خواناتر شدند.
- زمان کش روی ۵ دقیقه تنظیم شد (طبق توضیحات استاد).
- پیام‌های alert برای موفقیت و خطا در همه بخش‌ها اضافه شد.
- خروج با پیام تأیید انجام می‌شود.
- از کامنت‌های زیاد خودداری کردم چون استاد گفته بود فقط در موارد لازم بنویسم.

---

## نحوه اجرا

۱. فایل `index.html` را در مرورگر باز کنید.  
۲. از صفحهٔ `login.html` وارد شوید (هر حساب تستی سرور قابل استفاده است).  
۳. بعد از ورود، داشبورد و صفحات دیگر فعال می‌شوند.  
۴. برای خروج از حساب روی گزینهٔ "خروج" کلیک کنید.

---

## چیزهایی که از این پروژه یاد گرفتم

- نحوهٔ کار با `XMLHttpRequest` برای ارسال GET و POST
- مدیریت کوکی‌ها و اعتبارسنجی کاربر
- ساخت کش با `localStorage` و انقضای زمانی
- افزودن و حذف المنت‌ها در DOM
- تفکیک منطقی فایل‌ها بر اساس نقش هر بخش (auth, dashboard, books, loans)

---

## چالش‌هایی که باهاش روبه‌رو شدم

- در ابتدا نمی‌دانستم چطور باید کش را با زمان انقضا پیاده‌سازی کنم.
- چند بار به خطای CORS خوردم تا یاد گرفتم درخواست‌ها را درست بفرستم.
- برای ساده‌تر شدن پروژه `fetch` را کنار گذاشتم و از `XMLHttpRequest` استفاده کردم.

---

**تهیه‌کننده:** [مریم حسن زاده]
